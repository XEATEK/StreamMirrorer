@page "/"
@using StreamMirrorer.Enums
@using StreamMirrorer.Interfaces
@inject IRecordController RecordController
@inject IJSRuntime JsRuntime

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

<p role="status">Test Recorder: @RecorderTimes</p>

<input type="text" @bind-value="StreamerName" placeholder="Streamer username"/>

<button class="btn btn-primary" @onclick="IncrementCount">Record 10 second segment</button>

@code {
    private string? StreamerName { get; set; }
    private int RecorderTimes { get; set; }
    
    private async Task IncrementCount()
    {
        if (string.IsNullOrWhiteSpace(StreamerName))
        {
            await JsRuntime.InvokeVoidAsync("alert", "Please enter a streamer name!");
            return;
        }
        
        await RecordController.StartNewRecording(StreamerName, StreamerPlatforms.Twitch);
        RecorderTimes++;
    }

}